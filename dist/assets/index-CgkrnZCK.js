(function(){const R=document.createElement("link").relList;if(R&&R.supports&&R.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))S(l);new MutationObserver(l=>{for(const p of l)if(p.type==="childList")for(const u of p.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&S(u)}).observe(document,{childList:!0,subtree:!0});function E(l){const p={};return l.integrity&&(p.integrity=l.integrity),l.referrerPolicy&&(p.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?p.credentials="include":l.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function S(l){if(l.ep)return;l.ep=!0;const p=E(l);fetch(l.href,p)}})();const st="modulepreload",ct=function(B){return"/"+B},Te={},ke=function(R,E,S){let l=Promise.resolve();if(E&&E.length>0){let u=function(h){return Promise.all(h.map(T=>Promise.resolve(T).then(k=>({status:"fulfilled",value:k}),k=>({status:"rejected",reason:k}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),q=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));l=u(E.map(h=>{if(h=ct(h),h in Te)return;Te[h]=!0;const T=h.endsWith(".css"),k=T?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${k}`))return;const b=document.createElement("link");if(b.rel=T?"stylesheet":st,T||(b.as="script"),b.crossOrigin="",b.href=h,q&&b.setAttribute("nonce",q),document.head.appendChild(b),T)return new Promise((P,$)=>{b.addEventListener("load",P),b.addEventListener("error",()=>$(new Error(`Unable to preload CSS for ${h}`)))})}))}function p(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return l.then(u=>{for(const f of u||[])f.status==="rejected"&&p(f.reason);return R().catch(p)})};document.addEventListener("DOMContentLoaded",()=>{const B=document.getElementById("userForm"),R=document.getElementById("usuariosContainer"),E=document.getElementById("searchInput"),S=document.getElementById("clearSearch"),l=document.getElementById("cargoFilter"),p=document.getElementById("sortBy"),u=document.getElementById("exportData"),f=document.getElementById("gridView"),q=document.getElementById("listView"),h=document.getElementById("itemsPerPageSelect"),T=document.getElementById("scanQRBtn"),k=document.getElementById("shareQRBtn"),b=document.getElementById("qrScannerModal"),P=document.getElementById("shareQRModal"),$=document.getElementById("firstPage"),j=document.getElementById("prevPage"),z=document.getElementById("nextPage"),K=document.getElementById("lastPage"),O=document.getElementById("pageNumbers"),ge=document.getElementById("pageInfo"),De=document.getElementById("totalUsers"),qe=document.getElementById("newUsersToday"),Pe=document.getElementById("filteredUsers"),L=document.getElementById("confirmModal"),M=document.getElementById("editModal"),J=document.getElementById("emptyState"),N=document.getElementById("foto"),C=document.getElementById("filePreview");let g=[],U=[],m=1,Q=4,te="grid",ye="nome",re="",F="",w=null,_="environment",G=!1,V=!1;Me();function Me(){try{We(),$e(),le(),D(),I(),x(),it(),ze(),setTimeout(()=>{document.body.classList.add("loaded")},100),Ue()}catch(e){console.error("Erro na inicialização:",e),s("Erro","Erro ao inicializar o sistema. Recarregue a página.","error")}}function Ue(){"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").catch(e=>{console.log("Service Worker registration failed:",e)}),window.addEventListener("beforeinstallprompt",e=>{e.preventDefault()})}function $e(){var e;try{B==null||B.addEventListener("submit",Ye),(e=document.getElementById("clearForm"))==null||e.addEventListener("click",Se),E==null||E.addEventListener("input",pe(Je,300)),S==null||S.addEventListener("click",Ge),l==null||l.addEventListener("change",Ze),p==null||p.addEventListener("change",et),f==null||f.addEventListener("click",()=>ue("grid")),q==null||q.addEventListener("click",()=>ue("list")),$==null||$.addEventListener("click",()=>A(1)),j==null||j.addEventListener("click",()=>A(m-1)),z==null||z.addEventListener("click",()=>A(m+1)),K==null||K.addEventListener("click",()=>A(ee())),h==null||h.addEventListener("change",tt),u==null||u.addEventListener("click",xe),T==null||T.addEventListener("click",Ee),k==null||k.addEventListener("click",be),N==null||N.addEventListener("change",Xe),_e(),Oe(),Ve(),Ke(),Fe(),window.addEventListener("resize",pe(ve,250)),window.addEventListener("orientationchange",Qe)}catch(t){console.error("Erro ao configurar event listeners:",t)}}function pe(e,t){let o;return function(...n){const a=()=>{clearTimeout(o),e(...n)};clearTimeout(o),o=setTimeout(a,t)}}function ve(){w&&b.classList.contains("show")&&(w.stop(),setTimeout(()=>{w&&w.start()},100))}function Qe(){setTimeout(()=>{ve()},500)}function Fe(){document.addEventListener("keydown",e=>{var t;(e.ctrlKey||e.metaKey)&&e.key==="k"&&(e.preventDefault(),E==null||E.focus()),(e.ctrlKey||e.metaKey)&&e.key==="n"&&(e.preventDefault(),(t=document.getElementById("nome"))==null||t.focus()),(e.ctrlKey||e.metaKey)&&e.key==="e"&&(e.preventDefault(),xe()),(e.ctrlKey||e.metaKey)&&e.key==="s"&&(e.preventDefault(),Ee()),(e.ctrlKey||e.metaKey)&&e.shiftKey&&e.key==="S"&&(e.preventDefault(),be()),e.key==="Escape"&&Ae()})}function Ae(){Y(),X(),H(),oe()}function Oe(){var e,t,o,r,n,a,i,y,c;try{(e=document.getElementById("qrScannerClose"))==null||e.addEventListener("click",H),(t=document.getElementById("toggleFlashBtn"))==null||t.addEventListener("click",Ne),(o=document.getElementById("switchCameraBtn"))==null||o.addEventListener("click",He),(r=document.getElementById("shareQRClose"))==null||r.addEventListener("click",oe),(n=document.getElementById("shareAllBtn"))==null||n.addEventListener("click",()=>ne("all")),(a=document.getElementById("shareFilteredBtn"))==null||a.addEventListener("click",()=>ne("filtered")),(i=document.getElementById("shareSelectedBtn"))==null||i.addEventListener("click",()=>ne("selected")),(y=document.getElementById("downloadQRBtn"))==null||y.addEventListener("click",we),(c=document.getElementById("copyQRBtn"))==null||c.addEventListener("click",Le),b==null||b.addEventListener("click",d=>{d.target===b&&H()}),P==null||P.addEventListener("click",d=>{d.target===P&&oe()})}catch(d){console.error("Erro ao configurar eventos QR:",d)}}async function Ee(){try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){s("Erro","Câmera não disponível neste dispositivo.","error");return}try{if((await navigator.permissions.query({name:"camera"})).state==="denied"){s("Erro","Permissão de câmera negada. Verifique as configurações do navegador.","error");return}}catch{console.log("Permission API not supported")}b.classList.add("show"),document.body.style.overflow="hidden";const e=document.getElementById("qrVideo"),t=document.querySelector(".qr-overlay");t.innerHTML=`
                <div style="color: white; text-align: center;">
                    <div class="loading" style="width: 40px; height: 40px; margin: 0 auto 16px;"></div>
                    <p>Iniciando câmera...</p>
                </div>
            `;let o;try{o=(await ke(()=>import("https://cdn.skypack.dev/qr-scanner@1.4.2"),[])).default}catch(r){console.error("Erro ao carregar QR Scanner:",r),s("Erro","Erro ao carregar o scanner. Verifique sua conexão.","error"),H();return}w=new o(e,r=>{V&&je(r.data||r)},{highlightScanRegion:!0,highlightCodeOutline:!0,preferredCamera:_,maxScansPerSecond:5,returnDetailedScanResult:!0}),V=!0,await w.start(),t.innerHTML=`
                <div class="qr-frame">
                    <div class="qr-corner qr-corner-tl"></div>
                    <div class="qr-corner qr-corner-tr"></div>
                    <div class="qr-corner qr-corner-bl"></div>
                    <div class="qr-corner qr-corner-br"></div>
                </div>
                <div class="qr-instructions">
                    <iconify-icon icon="mdi:qrcode"></iconify-icon>
                    <p>Posicione o QR Code dentro da moldura</p>
                </div>
            `;try{const r=await w.hasFlash(),n=document.getElementById("toggleFlashBtn");n&&(n.style.display=r?"flex":"none")}catch{console.log("Flash not available")}s("Sucesso","Scanner QR iniciado. Posicione o código na moldura.","success")}catch(e){console.error("Erro ao iniciar scanner QR:",e),V=!1;let t="Erro ao acessar a câmera.";e.name==="NotAllowedError"?t="Permissão de câmera negada. Permita o acesso à câmera.":e.name==="NotFoundError"?t="Nenhuma câmera encontrada no dispositivo.":e.name==="NotReadableError"&&(t="Câmera está sendo usada por outro aplicativo."),s("Erro",t,"error"),H()}}function H(){try{V=!1,w&&(w.stop(),w.destroy(),w=null),b.classList.remove("show"),document.body.style.overflow="",G=!1;const e=document.getElementById("toggleFlashBtn");e&&e.classList.remove("active")}catch(e){console.error("Erro ao fechar scanner:",e)}}async function Ne(){if(w)try{const e=document.getElementById("toggleFlashBtn");G?(await w.turnFlashOff(),G=!1,e==null||e.classList.remove("active"),s("Info","Flash desligado","info")):(await w.turnFlashOn(),G=!0,e==null||e.classList.add("active"),s("Info","Flash ligado","info"))}catch(e){console.error("Erro ao controlar flash:",e),s("Erro","Erro ao controlar o flash.","error")}}async function He(){if(w)try{_=_==="environment"?"user":"environment",await w.setCamera(_),s("Info",`Câmera ${_==="environment"?"traseira":"frontal"} ativada`,"info")}catch(e){console.error("Erro ao trocar câmera:",e),s("Erro","Erro ao trocar câmera.","error")}}function je(e){try{if(!V)return;const t=JSON.parse(e);t.type==="usuarios"&&Array.isArray(t.data)?(he(t.data),H()):s("Erro","QR Code não contém dados de usuários válidos.","error")}catch(t){console.error("Erro ao processar QR:",t),s("Erro","QR Code inválido ou corrompido.","error")}}function he(e){try{let t=0,o=0;e.forEach(n=>{if(g.find(i=>i.email.toLowerCase()===n.email.toLowerCase()))o++;else{const i={...n,id:Date.now()+Math.random(),dataCadastro:new Date().toISOString()};g.unshift(i),t++}}),t>0&&(W(),D(),I(),x(),A(1));let r="";t>0&&(r+=`${t} usuário(s) importado(s) com sucesso!`),o>0&&(r+=` ${o} usuário(s) já existente(s) foram ignorados.`),s("Importação",r||"Nenhum usuário novo foi importado.",t>0?"success":"warning")}catch(t){console.error("Erro ao importar usuários:",t),s("Erro","Erro ao importar usuários.","error")}}function be(){try{P.classList.add("show"),document.body.style.overflow="hidden";const e=document.getElementById("shareSelectedBtn");e&&(e.disabled=!0);const t=document.getElementById("qrCodeContainer");t&&(t.style.display="none")}catch(e){console.error("Erro ao abrir modal de compartilhamento:",e)}}function oe(){try{P.classList.remove("show"),document.body.style.overflow="";const e=document.getElementById("qrCodeContainer");e&&(e.style.display="none")}catch(e){console.error("Erro ao fechar modal de compartilhamento:",e)}}async function ne(e){var t,o;try{let r=[],n="";switch(e){case"all":r=g,n="Todos os Usuários";break;case"filtered":r=U,n="Usuários Filtrados";break;case"selected":r=[],n="Usuários Selecionados";break}if(r.length===0){s("Aviso","Nenhum usuário para compartilhar.","warning");return}const a=document.getElementById("qrCodeContainer");a&&(a.style.display="block",a.innerHTML=`
                    <div style="text-align: center; padding: 40px;">
                        <div class="loading" style="width: 40px; height: 40px; margin: 0 auto 16px;"></div>
                        <p>Gerando QR Code...</p>
                    </div>
                `);const i={type:"usuarios",title:n,timestamp:new Date().toISOString(),data:r.map(v=>({nome:v.nome,email:v.email,telefone:v.telefone,cargo:v.cargo,foto:v.foto}))};let y;try{y=(await ke(()=>import("https://cdn.skypack.dev/qrcode@1.5.3"),[])).default}catch(v){console.error("Erro ao carregar QRCode:",v),s("Erro","Erro ao carregar gerador de QR Code.","error");return}const c=JSON.stringify(i),d=document.createElement("canvas");d.id="qrCanvas",await y.toCanvas(d,c,{width:Math.min(300,window.innerWidth-100),margin:2,color:{dark:"#000000",light:"#FFFFFF"},errorCorrectionLevel:"M"}),a&&(a.innerHTML=`
                    <div style="text-align: center;">
                        <h4 style="margin-bottom: 16px; color: var(--text-primary);">${n}</h4>
                    </div>
                    <div class="qr-actions">
                        <button id="downloadQRBtn" class="btn-primary">
                            <iconify-icon icon="mdi:download"></iconify-icon> Baixar QR Code
                        </button>
                        <button id="copyQRBtn" class="btn-secondary">
                            <iconify-icon icon="mdi:content-copy"></iconify-icon> Copiar Link
                        </button>
                    </div>
                `,a.insertBefore(d,a.querySelector(".qr-actions")),d.dataset.qrData=c,d.dataset.title=n,(t=document.getElementById("downloadQRBtn"))==null||t.addEventListener("click",we),(o=document.getElementById("copyQRBtn"))==null||o.addEventListener("click",Le)),s("Sucesso",`QR Code gerado para ${n.toLowerCase()}!`,"success")}catch(r){console.error("Erro ao gerar QR Code:",r),s("Erro","Erro ao gerar QR Code. Tente novamente.","error")}}function we(){try{const e=document.getElementById("qrCanvas");if(!e){s("Erro","QR Code não encontrado.","error");return}const t=e.dataset.title||"usuarios",o=document.createElement("a");o.download=`qr-code-${t.toLowerCase().replace(/\s+/g,"-")}-${new Date().toISOString().split("T")[0]}.png`,o.href=e.toDataURL("image/png"),document.body.appendChild(o),o.click(),document.body.removeChild(o),s("Sucesso","QR Code baixado com sucesso!","success")}catch(e){console.error("Erro ao baixar QR Code:",e),s("Erro","Erro ao baixar QR Code.","error")}}async function Le(){try{const e=document.getElementById("qrCanvas");if(!e){s("Erro","QR Code não encontrado.","error");return}const t=e.dataset.qrData;if(!t){s("Erro","Dados do QR Code não encontrados.","error");return}const o=btoa(encodeURIComponent(t)),r=`${window.location.origin}${window.location.pathname}?import=${o}`;if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(r);else{const n=document.createElement("textarea");n.value=r,n.style.position="fixed",n.style.left="-999999px",n.style.top="-999999px",document.body.appendChild(n),n.focus(),n.select(),document.execCommand("copy"),document.body.removeChild(n)}s("Sucesso","Link copiado para a área de transferência!","success")}catch(e){console.error("Erro ao copiar link:",e),s("Erro","Erro ao copiar link.","error")}}function ze(){try{const t=new URLSearchParams(window.location.search).get("import");if(t)try{const o=decodeURIComponent(atob(t)),r=JSON.parse(o);r.type==="usuarios"&&Array.isArray(r.data)&&confirm(`Deseja importar ${r.data.length} usuário(s) compartilhado(s)?`)&&he(r.data),window.history.replaceState({},document.title,window.location.pathname)}catch(o){console.error("Erro ao processar dados de importação:",o)}}catch(e){console.error("Erro ao verificar dados de importação:",e)}}function Ke(){document.querySelectorAll("button, .btn-primary, .btn-secondary, .btn-danger, .btn-export, .btn-scan, .btn-share").forEach(a=>{a.addEventListener("touchstart",function(i){this.style.transform="scale(0.95)",navigator.vibrate&&navigator.vibrate(10)},{passive:!0}),a.addEventListener("touchend",function(i){setTimeout(()=>{this.style.transform=""},100)},{passive:!0}),a.addEventListener("touchcancel",function(i){this.style.transform=""},{passive:!0})});let t,o,r,n;document.addEventListener("touchstart",a=>{t=a.touches[0].clientX,o=a.touches[0].clientY},{passive:!0}),document.addEventListener("touchmove",a=>{if(!t||!o)return;r=a.touches[0].clientX,n=a.touches[0].clientY;const i=t-r,y=o-n;Math.abs(i)>Math.abs(y)&&Math.abs(i)>10&&a.preventDefault()},{passive:!1})}function _e(){var e,t,o,r,n,a;try{(e=document.getElementById("modalClose"))==null||e.addEventListener("click",Y),(t=document.getElementById("modalCancel"))==null||t.addEventListener("click",Y),(o=document.getElementById("modalConfirm"))==null||o.addEventListener("click",ot),(r=document.getElementById("editModalClose"))==null||r.addEventListener("click",X),(n=document.getElementById("editModalCancel"))==null||n.addEventListener("click",X),(a=document.getElementById("editModalSave"))==null||a.addEventListener("click",at),L==null||L.addEventListener("click",i=>{i.target===L&&Y()}),M==null||M.addEventListener("click",i=>{i.target===M&&X()})}catch(i){console.error("Erro ao configurar eventos de modal:",i)}}function Ve(){try{[{id:"nome",validator:ie},{id:"email",validator:se},{id:"telefone",validator:ce},{id:"cargo",validator:de}].forEach(({id:t,validator:o})=>{const r=document.getElementById(t),n=document.getElementById(`${t}Error`);!r||!n||(r.addEventListener("blur",()=>{const a=o(r.value.trim());ae(n,a),a?(r.style.borderColor="var(--danger-color)",r.style.boxShadow="0 0 0 4px rgba(255, 59, 48, 0.1)"):r.value.trim()&&(r.style.borderColor="var(--success-color)",r.style.boxShadow="0 0 0 4px rgba(52, 199, 89, 0.1)")}),r.addEventListener("input",()=>{if(n.textContent){const a=o(r.value.trim());ae(n,a)}}),r.addEventListener("focus",()=>{r.style.borderColor="var(--primary-color)",r.style.boxShadow="0 0 0 4px var(--primary-light)"}))})}catch(e){console.error("Erro ao configurar validação:",e)}}function ae(e,t){e&&(e.textContent=t||"",t?(e.style.opacity="1",e.style.transform="translateY(0)"):(e.style.opacity="0",e.style.transform="translateY(-10px)"))}function ie(e){return e?e.length<2?"Nome deve ter pelo menos 2 caracteres":e.length>100?"Nome deve ter no máximo 100 caracteres":/^[a-zA-ZÀ-ÿ\s]+$/.test(e)?"":"Nome deve conter apenas letras e espaços":"Nome é obrigatório"}function se(e){var n;if(!e)return"Email é obrigatório";if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))return"Email inválido";if(e.length>255)return"Email muito longo";const o=g.find(a=>a.email.toLowerCase()===e.toLowerCase()),r=(n=document.getElementById("editUserId"))==null?void 0:n.value;return o&&o.id!=r?"Este email já está cadastrado":""}function ce(e){return e?/^\(?\d{2}\)?\s?\d{4,5}-?\d{4}$/.test(e)?"":"Formato inválido. Use: (11) 99999-9999":"Telefone é obrigatório"}function de(e){return e?"":"Cargo é obrigatório"}function We(){try{const e=localStorage.getItem("usuarios");e?g=JSON.parse(e):(g=[{id:1,nome:"Ana Silva Santos",email:"ana.santos@empresa.com",telefone:"(11) 98765-4321",cargo:"Desenvolvedor",foto:"https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop",dataCadastro:new Date().toISOString()},{id:2,nome:"Carlos Eduardo Lima",email:"carlos.lima@empresa.com",telefone:"(21) 99876-5432",cargo:"Designer",foto:"https://images.pexels.com/photos/1222271/pexels-photo-1222271.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop",dataCadastro:new Date().toISOString()},{id:3,nome:"Mariana Costa Oliveira",email:"mariana.oliveira@empresa.com",telefone:"(31) 97654-3210",cargo:"Gerente",foto:"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop",dataCadastro:new Date().toISOString()}],W())}catch(e){console.error("Erro ao carregar usuários:",e),g=[]}}function W(){try{localStorage.setItem("usuarios",JSON.stringify(g)),le()}catch(e){console.error("Erro ao salvar usuários:",e),s("Erro","Erro ao salvar dados. Verifique o espaço de armazenamento.","error")}}function le(){try{const e=new Date().toDateString(),t=g.filter(o=>new Date(o.dataCadastro).toDateString()===e).length;me(De,g.length),me(qe,t),me(Pe,U.length)}catch(e){console.error("Erro ao atualizar estatísticas:",e)}}function me(e,t){if(!e)return;const o=parseInt(e.textContent)||0,r=t>o?1:-1,n=500,a=Math.abs(t-o);if(a===0)return;const i=Math.max(n/a,50);let y=o;const c=setInterval(()=>{y+=r,e.textContent=y,y===t&&clearInterval(c)},i)}function D(){try{let e=[...g];F&&(e=e.filter(o=>o.nome.toLowerCase().includes(F.toLowerCase())||o.email.toLowerCase().includes(F.toLowerCase())||o.cargo.toLowerCase().includes(F.toLowerCase()))),re&&(e=e.filter(o=>o.cargo===re)),e.sort((o,r)=>{switch(ye){case"nome":return o.nome.localeCompare(r.nome);case"email":return o.email.localeCompare(r.email);case"cargo":return o.cargo.localeCompare(r.cargo);case"data":return new Date(r.dataCadastro)-new Date(o.dataCadastro);default:return 0}}),U=e,le();const t=ee();m>t&&t>0?m=t:m<1&&(m=1)}catch(e){console.error("Erro ao aplicar filtros:",e)}}function I(){try{if(!R)return;if(R.innerHTML="",R.className=te==="grid"?"usuarios-grid":"usuarios-list",U.length===0){J&&(J.style.display="block");return}J&&(J.style.display="none");const e=(m-1)*Q;U.slice(e,e+Q).forEach((o,r)=>{const n=document.createElement("div");n.className=`usuario-card ${te==="list"?"list-view":""}`,n.style.animationDelay=`${r*.1}s`;const a=new Date(o.dataCadastro).toLocaleDateString("pt-BR");n.innerHTML=`
                    <img src="${o.foto}" alt="Foto de ${o.nome}" 
                         onerror="this.src='https://images.pexels.com/photos/1300402/pexels-photo-1300402.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop'"
                         loading="lazy">
                    <div class="usuario-info">
                        <h3>${o.nome}</h3>
                        <p><iconify-icon icon="mdi:email"></iconify-icon> ${o.email}</p>
                        <p><iconify-icon icon="mdi:phone"></iconify-icon> ${o.telefone}</p>
                        <p><iconify-icon icon="mdi:calendar"></iconify-icon> Cadastrado em ${a}</p>
                        <span class="cargo">${o.cargo}</span>
                    </div>
                    <div class="usuario-actions">
                        <button class="action-btn edit-btn" data-user-id="${o.id}" aria-label="Editar ${o.nome}">
                            <iconify-icon icon="mdi:pencil"></iconify-icon> Editar
                        </button>
                        <button class="action-btn remove-btn" data-user-id="${o.id}" aria-label="Remover ${o.nome}">
                            <iconify-icon icon="mdi:delete"></iconify-icon> Remover
                        </button>
                    </div>
                `,R.appendChild(n)}),document.querySelectorAll(".edit-btn").forEach(o=>{o.addEventListener("click",r=>{const n=parseInt(r.currentTarget.dataset.userId);nt(n)})}),document.querySelectorAll(".remove-btn").forEach(o=>{o.addEventListener("click",r=>{const n=parseInt(r.currentTarget.dataset.userId);rt(n)})})}catch(e){console.error("Erro ao mostrar usuários:",e)}}function x(){try{const e=ee();if($&&($.disabled=m===1),j&&(j.disabled=m===1),z&&(z.disabled=m===e||e===0),K&&(K.disabled=m===e||e===0),O)if(O.innerHTML="",e<=7)for(let t=1;t<=e;t++)Z(t);else{Z(1),m>4&&Ce();const t=Math.max(2,m-2),o=Math.min(e-1,m+2);for(let r=t;r<=o;r++)Z(r);m<e-3&&Ce(),e>1&&Z(e)}ge&&(ge.textContent=e>0?`Página ${m} de ${e}`:"Nenhum resultado")}catch(e){console.error("Erro ao atualizar paginação:",e)}}function Z(e){if(!O)return;const t=document.createElement("button");t.textContent=e,t.className=m===e?"active":"",t.setAttribute("aria-label",`Ir para página ${e}`),t.addEventListener("click",()=>A(e)),O.appendChild(t)}function Ce(){if(!O)return;const e=document.createElement("span");e.textContent="...",e.style.padding="8px",e.style.color="var(--text-secondary)",e.setAttribute("aria-hidden","true"),O.appendChild(e)}function ee(){return Math.ceil(U.length/Q)}function A(e){const t=ee();e>=1&&e<=t&&(m=e,I(),x(),window.innerWidth<=768&&window.scrollTo({top:0,behavior:"smooth"}))}function Ye(e){var t,o,r,n,a;e.preventDefault();try{const i={nome:((t=document.getElementById("nome"))==null?void 0:t.value.trim())||"",email:((o=document.getElementById("email"))==null?void 0:o.value.trim())||"",telefone:((r=document.getElementById("telefone"))==null?void 0:r.value.trim())||"",cargo:((n=document.getElementById("cargo"))==null?void 0:n.value)||"",foto:(a=N==null?void 0:N.files)==null?void 0:a[0]},y={nome:ie(i.nome),email:se(i.email),telefone:ce(i.telefone),cargo:de(i.cargo)};if(Object.keys(y).forEach(d=>{const v=document.getElementById(`${d}Error`);ae(v,y[d])}),Object.values(y).some(d=>d)){s("Erro","Por favor, corrija os erros no formulário.","error");return}const c=e.target.querySelector('button[type="submit"]');if(c){const d=c.innerHTML;if(c.innerHTML='<div class="loading" style="width: 20px; height: 20px; margin: 0 auto;"></div>',c.disabled=!0,i.foto){const v=new FileReader;v.onload=function(fe){Ie({...i,foto:fe.target.result}),c.innerHTML=d,c.disabled=!1},v.onerror=function(){s("Erro","Erro ao processar a imagem. Tente novamente.","error"),c.innerHTML=d,c.disabled=!1},v.readAsDataURL(i.foto)}else Ie({...i,foto:"https://images.pexels.com/photos/1300402/pexels-photo-1300402.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"}),c.innerHTML=d,c.disabled=!1}}catch(i){console.error("Erro ao processar formulário:",i),s("Erro","Erro ao processar formulário.","error")}}function Ie(e){try{const t={id:Date.now()+Math.random(),...e,dataCadastro:new Date().toISOString()};g.unshift(t),W(),D(),I(),x(),Se(),s("Sucesso","Usuário cadastrado com sucesso!","success"),A(1)}catch(t){console.error("Erro ao salvar usuário:",t),s("Erro","Erro ao salvar usuário.","error")}}function Se(){try{B==null||B.reset(),C&&(C.innerHTML=`
                    <iconify-icon icon="mdi:camera-plus"></iconify-icon>
                    <span>Clique para adicionar foto</span>
                `,C.classList.remove("has-image")),document.querySelectorAll(".error-message").forEach(e=>{e.textContent="",e.style.opacity="0",e.style.transform="translateY(-10px)"}),document.querySelectorAll("input, select").forEach(e=>{e.style.borderColor="",e.style.boxShadow=""})}catch(e){console.error("Erro ao limpar formulário:",e)}}function Xe(e){try{const t=e.target.files[0];if(!t)return;if(t.size>5*1024*1024){s("Erro","Arquivo muito grande. Máximo 5MB.","error"),e.target.value="";return}if(!t.type.startsWith("image/")){s("Erro","Por favor, selecione apenas imagens.","error"),e.target.value="";return}C&&(C.innerHTML=`
                    <div class="loading" style="width: 40px; height: 40px; margin: 0 auto 16px;"></div>
                    <span>Carregando imagem...</span>
                `);const o=new FileReader;o.onload=function(r){C&&(C.innerHTML=`<img src="${r.target.result}" alt="Preview">`,C.classList.add("has-image"),C.style.transform="scale(1.05)",setTimeout(()=>{C.style.transform=""},200))},o.onerror=function(){s("Erro","Erro ao carregar a imagem. Tente novamente.","error"),C&&(C.innerHTML=`
                        <iconify-icon icon="mdi:camera-plus"></iconify-icon>
                        <span>Clique para adicionar foto</span>
                    `,C.classList.remove("has-image")),e.target.value=""},o.readAsDataURL(t)}catch(t){console.error("Erro ao processar arquivo:",t),s("Erro","Erro ao processar arquivo.","error")}}function Je(e){try{F=e.target.value.trim(),S&&S.classList.toggle("show",F.length>0),m=1,D(),I(),x()}catch(t){console.error("Erro na busca:",t)}}function Ge(){try{E&&(E.value=""),F="",S&&S.classList.remove("show"),m=1,D(),I(),x(),E==null||E.focus()}catch(e){console.error("Erro ao limpar busca:",e)}}function Ze(e){try{re=e.target.value,m=1,D(),I(),x()}catch(t){console.error("Erro no filtro:",t)}}function et(e){try{ye=e.target.value,D(),I(),x()}catch(t){console.error("Erro na ordenação:",t)}}function ue(e){try{te=e,f&&f.classList.toggle("active",e==="grid"),q&&q.classList.toggle("active",e==="list"),I(),localStorage.setItem("viewPreference",e)}catch(t){console.error("Erro ao alterar visualização:",t)}}function tt(e){try{Q=parseInt(e.target.value),m=1,I(),x(),localStorage.setItem("itemsPerPagePreference",Q)}catch(t){console.error("Erro ao alterar itens por página:",t)}}function rt(e){try{const t=g.find(n=>n.id===e);if(!t)return;const o=document.getElementById("modalTitle"),r=document.getElementById("modalMessage");o&&(o.textContent="Confirmar Remoção"),r&&(r.textContent=`Tem certeza que deseja remover "${t.nome}"? Esta ação não pode ser desfeita.`),L&&(L.classList.add("show"),document.body.style.overflow="hidden",L.dataset.userId=e,L.dataset.action="remove")}catch(t){console.error("Erro ao confirmar remoção:",t)}}function ot(){try{if(!L)return;const e=L.dataset.action,t=parseInt(L.dataset.userId);e==="remove"&&(g=g.filter(o=>o.id!==t),W(),D(),I(),x(),s("Sucesso","Usuário removido com sucesso!","success")),Y()}catch(e){console.error("Erro ao executar ação:",e)}}function Y(){try{L&&(L.classList.remove("show"),document.body.style.overflow="",delete L.dataset.userId,delete L.dataset.action)}catch(e){console.error("Erro ao fechar modal de confirmação:",e)}}function nt(e){try{const t=g.find(y=>y.id===e);if(!t)return;const o=document.getElementById("editUserId"),r=document.getElementById("editNome"),n=document.getElementById("editEmail"),a=document.getElementById("editTelefone"),i=document.getElementById("editCargo");o&&(o.value=t.id),r&&(r.value=t.nome),n&&(n.value=t.email),a&&(a.value=t.telefone),i&&(i.value=t.cargo),M&&(M.classList.add("show"),document.body.style.overflow="hidden",setTimeout(()=>{r==null||r.focus()},300))}catch(t){console.error("Erro ao editar usuário:",t)}}function at(){try{const e=document.getElementById("editUserId"),t=document.getElementById("editNome"),o=document.getElementById("editEmail"),r=document.getElementById("editTelefone"),n=document.getElementById("editCargo");if(!e||!t||!o||!r||!n)return;const a=parseInt(e.value),i={nome:t.value.trim(),email:o.value.trim(),telefone:r.value.trim(),cargo:n.value},y={nome:ie(i.nome),email:se(i.email),telefone:ce(i.telefone),cargo:de(i.cargo)};if(Object.values(y).some(d=>d)){s("Erro","Por favor, corrija os erros no formulário.","error");return}const c=document.getElementById("editModalSave");if(c){const d=c.innerHTML;c.innerHTML='<div class="loading" style="width: 20px; height: 20px; margin: 0 auto;"></div>',c.disabled=!0;const v=g.findIndex(fe=>fe.id===a);v!==-1&&(g[v]={...g[v],...i},W(),D(),I(),x(),s("Sucesso","Usuário atualizado com sucesso!","success"),X()),c.innerHTML=d,c.disabled=!1}}catch(e){console.error("Erro ao salvar edição:",e),s("Erro","Erro ao salvar alterações.","error")}}function X(){try{M&&(M.classList.remove("show"),document.body.style.overflow="")}catch(e){console.error("Erro ao fechar modal de edição:",e)}}function xe(){try{if(U.length===0){s("Aviso","Não há dados para exportar.","warning");return}if(u){const e=u.innerHTML;u.innerHTML='<div class="loading" style="width: 20px; height: 20px; margin: 0 auto;"></div>',u.disabled=!0;try{const t=[["Nome","Email","Telefone","Cargo","Data de Cadastro"],...U.map(a=>[a.nome,a.email,a.telefone,a.cargo,new Date(a.dataCadastro).toLocaleDateString("pt-BR")])].map(a=>a.map(i=>`"${i}"`).join(",")).join(`
`),o=new Blob([t],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a"),n=URL.createObjectURL(o);r.setAttribute("href",n),r.setAttribute("download",`usuarios_${new Date().toISOString().split("T")[0]}.csv`),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n),s("Sucesso","Dados exportados com sucesso!","success")}catch{s("Erro","Erro ao exportar dados. Tente novamente.","error")}finally{u.innerHTML=e,u.disabled=!1}}}catch(e){console.error("Erro na exportação:",e),s("Erro","Erro ao exportar dados.","error")}}function s(e,t,o="info"){try{const r=document.getElementById("toastContainer");if(!r)return;const n=document.createElement("div");n.className=`toast ${o}`;const a={success:"mdi:check-circle",error:"mdi:alert-circle",warning:"mdi:alert",info:"mdi:information"};n.innerHTML=`
                <iconify-icon icon="${a[o]||a.info}"></iconify-icon>
                <div class="toast-content">
                    <div class="toast-title">${e}</div>
                    <div class="toast-message">${t}</div>
                </div>
                <button class="toast-close" aria-label="Fechar notificação">
                    <iconify-icon icon="mdi:close"></iconify-icon>
                </button>
            `;const i=n.querySelector(".toast-close");i&&i.addEventListener("click",()=>{Be(n)}),r.appendChild(n),setTimeout(()=>{Be(n)},5e3),navigator.vibrate&&navigator.vibrate(o==="error"?[100,50,100]:50)}catch(r){console.error("Erro ao mostrar toast:",r)}}function Be(e){e&&e.parentNode&&(e.style.transform="translateX(100%)",e.style.opacity="0",setTimeout(()=>{e.parentNode&&e.remove()},300))}function it(){try{const e=localStorage.getItem("viewPreference");e&&ue(e);const t=localStorage.getItem("itemsPerPagePreference");t&&h&&(Q=parseInt(t),h.value=Q)}catch(e){console.error("Erro ao carregar preferências:",e)}}const Re=document.createElement("style");Re.textContent=`
        .loading {
            border: 2px solid var(--border-color);
            border-top: 2px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            display: inline-block;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .animate-spin {
            animation: spin 1s linear infinite;
        }
    `,document.head.appendChild(Re)});
